# Импорт данных в iRidium studio

###  Добавить драйвер 

Подробно о драйверах, их назначении, особенностях и настройке, читайте в разделе [Драйверы для профессиональных систем ](https://dev.iridi.com/IRidium_studio_2019_Native_Drivers)\. В этом разделе мы рассмотрим **особенности импорта** данных из разных источников\. 

Драйвер можно добавить в интерфейс i3 pro или на iRidium server: 

- **импортом файла** конфигурации вашего оборудования, **сканированием** локальной сети\. Поддерживаются \(актуальный список см\. в iRidium studio\): 

    - AMX \(TPDesign, \*\.TP4, \*\.TP5\) – не отображается в импорте драйверов, но проект TP4 можно открыть в студии так же, как \*\.irpz \- файл \*\.TP4 будет автоматически конвертирован в формат i3 pro;
    - BACnet \- импорт из SBO Workstation;
    - Crestron \(SIMPL, \*\.smw\) – импорт файла, формирует список джоинов;
    - Domintell \- сканирование сети;
    - DuoTecno – сканирование сети;
    - HDL\-BUS Pro – сканирование сети;
    - iRidium project \(iRidium studio, \*\.irpz, \*\.sirpz\) – импорт файла, позволяет добавить драйверы из одного проекта в другой;
    - KNX \(ETS, \*\.knxproj\) – импорт файла, формирует список IP интерфейсов и групповых адресов;
    - Larnitech \- сканирование ПЛК;
    - Universal import from CSV file \(\*\.csv\) – импорт драйвера из \*csv файла в iRidium;
    - Universal import from JS \(\*\.js\) – импорт драйвера из \*\.js файла в iRidium;
    - Velbus \- сканирование сети\.
- из **базы данных** , где хранится список драйверов разного типа, которые можно использовать в проекте\. Команды и фидбеки необходимо будет формировать вручную
- создать через **JavaScript** \. В таком случае он не будет отображаться в дереве драйверов, но будет работать при запуске i3 pro, способом, который определил разработчик\. См\. [JS API ](https://dev.iridi.com#JS_Handbook)\.

![123](/img/Импорт_данных_в_iRidium_studio/Studio2019_SidePanel_Drivers_onServer.png)

##  AMX\. Использование проекта TPDesign 

Файлы TPDesign \(\*\.TP4, \*\.TP5\) не отображается в импорте драйверов, но проект TP4 можно открыть в студии так же, как \*\.irpz \- файл \*\.TP4 будет автоматически конвертирован в формат i3 pro и доступен для редактирования\. Но, обратная совместимость не поддерживается \- вы не можете сохранить проект iRidium в формате TP4 или TP5, т\.к\. iRidium использует множество компонентов, не имеющих AMX аналогов\. Студия открывает проект с возможностью редактирования графических элементов и звуков\. 

`1` Используйте меню `File > Open` , чтобы создать интерфейс для i3 pro на базе интерфейса AMX\. 

`2` После импорта файла, iRidium Studio предложит так же импортировать из проекта TPDesign привязанные к элементам звуки \(SingleBeepSound\): 

![123](/img/Импорт_данных_в_iRidium_studio/SingleBeep.png)

##  BACnet\. Импорт из SBO Workstation 

Конфигурацию оборудования можно сохранить в формате xml и импортировать в iRidium\. 

1. Сохраните файл проекта в формате \*\.xml \(BACnet Project\)
1. Авторизуйтесь в StruxureWare Building Operation Workstation
1. В StruxureWare Building Operation кликните правой кнопкой мыши по Enterprise server, и выберите пункт Import из раскрывающегося списка
1. Создайте проект в iRidium studio, откройте меню `File > Import` и выберите \*\.xml \(BACnet Project\) для импорта
1. На основе файла формируется драйвер с каналами и тегами

![123](/img/Импорт_данных_в_iRidium_studio/BacnetImport.png)

##  Crestron\. Импорт из SIMPL Windows 

:::warning
 В проект SIMPL Windows обязательно добавьте любую панель, настройте для нее идентификатор 
:::

**IP ID** – управляющие устройства iRidium будут использовать **IP ID** для подключения к контроллеру Crestron: 

![123](/img/Импорт_данных_в_iRidium_studio/Add_panel.png)

Создайте проект в iRidium studio, меню `File > Import` , или нажмите кнопку Import в панели драйверов\. Выберите проект SIMPL Windows \( **\*\.smw** \) для импорта: 

![123](/img/Импорт_данных_в_iRidium_studio/Studio2019_Drivers_Crestron_import.png)

Отметье папки с джоинами, предназначенными для панели управления\. Вы получите драйвер, включающий джоины, доступные на запись \(Commands\) и чтение \(Feedbacks\): 

Вы также можете добавить пустой драйвер Crestron и создать список джоинов вручную\. 

##  Domintell\. Сканирование сети 

Сканирование шины Domintell работает только в локальной сети, по протоколу UDP, при указании IP\-адреса DETH02, через который ведется сканирование\. Прежде чем начать, **завершите все активные подклюния к DETH02\.** 

Создайте проект в iRidium studio, меню `File > Import` , или нажмите кнопку Import в панели драйверов\. Выберите пункт "Domintell network scanner"\. Укажите IP\-адрес вашего DETH02\. 

![123](/img/Импорт_данных_в_iRidium_studio/Studio2019_Drivers_Domintell_scan.png)

Если у вас нет возможности сканировать сеть, добавьте Domintell Network \(UDP\) и исполнительные устройства вручную: 

![123](/img/Импорт_данных_в_iRidium_studio/Studio2019_Drivers_Domintell_add.png)

**Список поддерживаемых устройств Domintell Light Protocol:** 

- DPBUT1 \(BU1\), DPBUT2 \(BU2\), DPBUT4 \(BU4\), DPBUT6 \(BU6\), DISM04 \(IS4\), DISM08 \(IS8\), DISM20 \(I20\)
- DPBR02 \(BR2\), DPBR04 \(BR4\), DPBR06 \(BR6\)
- DPBL01 \(B81\), DPBL02 \(B82\), DPBL04 \(B84\), DPBL06 \(B86\)
- DAMPLI01 \(AMP\)
- DINTMB01 \(MBD\)
- DBIR01 \(BIR\), DMR01 \(DMR\), DTRP01 \(TRP\), DLED01 \(LED\)
- DTRV01 \(TRV\), DTRP02 \(TPV\), DTRVBT01 \(V24\)
- DDIM01 \(DIM\), DOUT10V01 \(D10\), DINTDALI01 \(DAL\)
- DLCD03 \(LC3\), DPBTLCD0x \(PBL\), DPBRLCD0x \(PRL\), DTEM01 \(TE1\), DTEM02 \(TE2\), DTSC01\_03 \(TSB\), DTSC04 \(LT4\)
- DMOV01 \(DET\), DIN10V01 \(I10\), DISM04 \(IS4\), DISM08 \(IS8\)
- SOFT\_VAR \(VAR\), SYS\_VAR \(SYS\), MEM \(MEM\), SFE \(SFE\), ZON \(ZON\)
- FAN01 \(FAN\), DMV01 \(DMV\)

##  HDL\-BUS Pro\. Сканирование сети 

Сканирование локальной сети позволяет автоматически сформировать список доступных для управления устройств, аналогично Поиску в HDL setup tool\. Укажите, в течение какого времени \(мс\) производить сканирование сети и сколько попыток сканирования выполнить\. Увеличьте продолжительность и повторите сканирование, если найдены еще не все устройства в сети: 

![123](/img/Импорт_данных_в_iRidium_studio/Studio2019_Drivers_HDL_scanner_1.png)

После добавления устройств появится окно, в котором можно установить интервал, с которым будут опрашиваться устройства: 

![123](/img/Импорт_данных_в_iRidium_studio/HDL_User_Timer_1.png)

- **On Start Update** \- установить интервал для всех каналов, у которых по умолчанию включено свойство Use Timer\. Поставьте галочку и укажите интервал отправки запроса \(в секундах\) – он будет применен для всех каналов, которые запрашивают статус устройства\.
- **Every Channel** \- позволяет установить интервал опроса для команд, у которых таймер по умолчанию выключен

:::info
такой же диалог появится при загрузке проекта, созданного в iRidium v2\. 
:::

Чтобы добавить исполнительные устройства \(subdevice\) в драйвер HDL вручную, добавьте HDL Network и выберите пункт "Add subdevice", чтобы добавить устройства: 

![123](/img/Импорт_данных_в_iRidium_studio/Studio2019_Drivers_HDL_add_subdevices.png)

##  iRidium database \(iRidium studio, \*\.irdb\)\. Импорт драйвера из базы данных\. 

**iRidium database \(iRidium studio, \*\.irdb\)** \- это возможность импорта драйвера из базы данных, созданного в [старой студии ](http://wiki2.iridiummobile.ru/IRidium_DDK#.D0.9F.D0.B5.D1.80.D0.B5.D0.BD.D0.BE.D1.81_.D0.B4.D1.80.D0.B0.D0.B9.D0.B2.D0.B5.D1.80.D0.B0_.D0.B2_.D0.B1.D0.B0.D0.B7.D1.83_.D1.83.D1.81.D1.82.D1.80.D0.BE.D0.B9.D1.81.D1.82.D0.B2)\. 

:::tip
**Пример:** 
- [Eclerdrivers ](https://s3.amazonaws.com/iRidiumWiki2.0/Import/Eclerdrivers.irdb)
- [Z\-Wave ](https://s3.amazonaws.com/iRidiumWiki2.0/Import/Z-Wave.irdb)
- [SBIridium \(1\.2\) ](https://s3.amazonaws.com/iRidiumWiki2.0/Import/SBIridium+(1.2).irdb)
- [ZWave\_Hartsco ](https://s3.amazonaws.com/iRidiumWiki2.0/Import/ZWave_Hartsco.irdb)

:::

`1` Выберите из списка iRidium database \(iRidium studio, \*\.irdb\) и укажите путь к файлу\. 

![123](/img/Импорт_данных_в_iRidium_studio/Import_from_bd_2.png)

`2` В списке появятся драйвера указанные в файле импорта\. 

![123](/img/Импорт_данных_в_iRidium_studio/Import_from_bd_1.png)

##  KNX\. Импорт из ETS 

iRidium studio поддерживает импорт из ETS5 в форматах  \*\.knxproj, \*\.csv\. Желательно использовать английский язык в имени проекта\. Язык Windows должен совпадать с языком проекта – для корректного импорта имен\. 

Для импорта проектов из ETS5 в i3 pro разработан специальный интструмент \- **ETS import** \. Подробнее о его работе можно прочитать в статье по работе с [ETS Import ](https://dev.iridi.com/IRidium_studio_2019_Control_tools#ETS_import._Импорт_групповых_адресов_из_ETS)\. 

1. Если ETS проект защищен паролем – сохраните его без пароля, иначе возникнет ошибка импорта
1. Сохраните файл проекта в формате \*\.knxproj\.
1. Создайте проект в iRidium studio, откройте меню `File > Import` и выберите ETS проект для импорта
1. Начнется распаковка проекта\. В диалоге распаковки укажите, какие IP\-интерфейсы вы хотите добавить: 

    1. KNX Router \(Interface\) \- содержит все 3\-х составные групповые адреса ETS проекта
    1. KNX IP BAOS \- содержит список Datapoints, промежуточных адресов, которые связаны с групповыми\. Управление через Datapoints имеет свои особенности настройки \(см\. информацию о BAOS\)
1. Диалоговое окно покажет список адресов, размерность которых не удалось определить при импорте \- они не будут добавлены\! Проверьте полноту настройки этих адресов в ETS и обратитесь в поддержку
1. Завершите импорт – интерфейсы с импортированными адресами появятся в вашем проекте

:::info
в ETS присвойте флаг “\[√\] Read” групповым адресам, которые нужно опрашивать при запуске i3 pro или iRidium server \(в зависимости от того, где работает драйвер\)\. Опрос производится при запуске проекта, однократно \(до 3х попыток\), и позволяет актуализировать статусы групповых адресов\. В настройках каждого адреса можно отключить стартовый опрос; флаг Read в ETS позволяет адресам отвечать на опрос\. 
:::

![123](/img/Импорт_данных_в_iRidium_studio/KNX_properties_program_read_fag.png)

##  Larnitech\. Сканирование контроллера 

Larnitech scanner \- опрашивает контроллер Larnitech на наличие доступных устройств и заносит их в список драйверов iRidium studio\. 

`1` Выберите Larnitech scanner в списке импортов\. 

![123](/img/Импорт_данных_в_iRidium_studio/Import_larnitech1.png)

`2` Введите настройки: 

![123](/img/Импорт_данных_в_iRidium_studio/Import_larnitech2.png)

- IP address\- IP\-адрес шлюза или контроллера Larnitech;
- Port \- по умолчанию 8888;
- Key for API \- ключ доступа\. Чтобы его узнать, перейдите в веб\-интерфейс шлюза или контроллера \(LT Setup\)\. Далее перейдите на вкладку Плагины\.

`3` Далее настройте устройства в iRidium studio с помощью [статьи ](https://dev.iridi.com/Larnitech)\. 

##  Universal import from CSV File \(\*\.csv\) 

**Universal import from CSV File** \- это возможность импорта драйверов из таблицы, представленной в формате CSV\. 

**CSV \(от англ\. Comma\-Separated Values — значения, разделённые запятыми\)** — текстовый формат, предназначенный для представления табличных данных\. Строка таблицы соответствует строке текста, которая содержит одно или несколько полей, разделенных запятыми\. Большинство привычных нам таблиц excel можно представить в формате csv\. Такой формат удобен для неоднократного импорта драйверов со схожими параметрами в проекты\. 

:::tip
**Пример:** 
- [MQTT ](https://s3.amazonaws.com/iRidiumWiki2.0/Import/MQTT+import.xlsx);
- [SNMP ](https://devprom.iridi.nt/file/pm_Attachment/dev21/5196);
- [EPSNET \(UDP\) ](https://s3.amazonaws.com/iRidiumWiki2.0/Import/EPSNET+import.xlsx);
- [Modbus TCP ](https://s3.amazonaws.com/iRidiumWiki2.0/Driver_Modbus/Modbus_import.xls)\.

:::

###  Структура файла 

![123](/img/Импорт_данных_в_iRidium_studio/Import_form_CSV1.png)

`1` Параметры драйвера \(отмечены зеленым  цветом\): 

- Name \- имя драйвера;
- Driver Type \- тип драйвера и протокол подключения;
- Parameters \- параметры подключения \(Host, Port, и другие специфические параметры драйвера\)\.

`2` Параметры команд \(отмечены желтым  цветом\) \- формируется таблица, в заголовках таблицы указываются параметры команды, ниже приводятся значения данных параметров\. 

`3` Параметры фидбеков \(отмечены синим  цветом\) \- формируется таблица, в заголовках таблицы указываются параметры фидбеков, ниже приводятся значения данных параметров\. 

:::info
Все параметры драйвера и возможные значения можно найти в iRidium Studio\. 
:::

![123](/img/Импорт_данных_в_iRidium_studio/Import_from_CSV_3.png)

:::info
При создании CSV файла, в качестве разделителя полей нужно использовать точку с запятой, а разделителя строк двойные кавычки\. 
:::

:::warning
 Нельзя в именах каналов и фидбеков использовать точку и двоеточие\. Это зарезервированные для парсинга символы\. 
:::

:::warning
 Импорт из CSV не применим к драйверам с пометкой "Network"\. 
:::

![123](/img/Импорт_данных_в_iRidium_studio/Import_from_CSV_2.png)

###  Импорт CSV файла 

`1` Выберите из списка Universal import from CSV files \(\*\.csv\) и укажите путь к файлу\. 

![123](/img/Импорт_данных_в_iRidium_studio/Import_from_bd_2.png)

`2` После импорта данных в проект добавятся новые драйвера\. 

##  Universal import from JS \(\*\.js\) 

Universal import from JS \- это возможность импорта драйверов из текстового файла формата js, который содержит информационную структуру json\. Json \- описывает список драйверов для импорта\. В этом файле драйверу можно задать определенные характеристики для подключения, а также создать команды и фидбеки\. 

Полную инструкцию по импорту драйвера читайте [здесь ](https://dev.iridi.com/Universal_import_from_JS)\. 

NewPP limit report
CPU time usage: 0\.123 seconds
Real time usage: 0\.130 seconds
Preprocessor visited node count: 294/1000000
Preprocessor generated node count: 708/1000000
Post‐expand include size: 1661/2097152 bytes
Template argument size: 462/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100 Saved in parser cache with key irmob\_wiki3:pcache:idhash:29809\-0\!\*\!0\!\!ru\!5\!\* and timestamp 20250712154244 and revision id 139358
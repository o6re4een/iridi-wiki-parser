---
id: IRidium_studio_2019_Command_Sending
title: Отправка команд из интерфейса i3 pro, отображение данных
---
# Отправка команд из интерфейса i3 pro, отображение данных

Наиболее частая задача интерфейса \- запись числовых значений в адреса/регистры/переменные оборудования и отображение числовых значений в интерфейсе\. При этом может потребоваться различная логика записи значений \(Value\), например: 

1. кнопка  при каждом нажатии отправляет одно и то же значение Value, указанное в связи кнопки с командой
1. триггер попеременно отправляет в переменную одно из значений Value, указанное в настройках триггера
1. уровень отправляет в переменную значение Value из диапазона при перемещении слайдера

Создавая интерфейс, вы выбираете для управления переменными тот тип графического элемента, логика работы которого подходит под задачи интерфейса\. Чтобы связать команду \(переменную\) с графическим элементом, нужно настроить элемент и перетащить на него команду из DRIVERS при помощи мыши\. 

##  Управление переменными из интерфейса 

1. Выберите [тип графического элемента ](https://dev.iridi.com/IRidium_studio_2019_Item_types#Типы_и_назначение_элементов), который выполняет ваши задачи
1. В настройках укажите [значения Value ](https://dev.iridi.com/IRidium_studio_2019_Item_types#Специфические_настройки_поведения,_определяемые_типом_элемента), которые должен отправлять элемент связанным с ним переменным
1. Перетащите команду из DRIVERS на графический элемент
1. В диалоге привязки команды выберите значение, которое будет отправлять графический элемент\. В случае с кнопкой \- это может быть Number, т\.е\. конкретное значение для отправки\. Другие типы элементов могут отправлять Value \- т\.е\. значение, которое генерирует элемент\. О том, как выбрать событие: Press, Release и др\. [см\. здесь ](https://dev.iridi.com#IRidium_studio_2019_UI_editor_PROGRAMMING._Действия_при_нажатии)
1. Если графический элемент должен не только отправлять, но и отображать данные, то поставьте галочку "Add feedback channel" и укажите, на какое свойство элемента будет влиять полученное значение \(изменит Value или заменит Text\)

![123](/img/IRidium_studio_2019_Command_Sending/Studio2019_SidePanel_Drivers_add_command.png)

##  Отображение данных в интерфейсе 

1. Выберите [тип графического элемента ](https://dev.iridi.com/IRidium_studio_2019_Item_types#Типы_и_назначение_элементов)для отображения данных \- это может быть тот же элемент, что управляет оборудованием, или элемент\-дисплей \(Label\)
1. Перетащите фидбек на графический элемент: 

    1. **In Value** \- переключить состояние элемента при помощи значения, полученного из переменной \(возможность переключения зависит от настроек элемента, см\. инструкцию к типам элементов\); отобразить полученное значение в тексте элемента при использовании опции "Show value in text" \(см\. настройки текста\), которая позволяет отобразить значение с фиксированным числом знаков после запятой\.
    1. **In Text** \- отобразить в тексте элемента значение, полученное из переменной\. Если переменная возвращает число с плавающей запятой, оно отобразится с шестью нулями после запятой, поэтому используйте "In Value" и опцию "Show value in text" в настройках текста, чтобы управлять форматом отображения чисел\.
    1. **More** \- воздействовать полученным из фидбека/токена значением на любое свойство элемента \(прозрачность, видимость, размер и др\.\)

![123](/img/IRidium_studio_2019_Command_Sending/Studio2019_SidePanel_Drivers_add_relation.png)

##  Отображение значения в тексте 

Отображение значения в тексте с помощью опции "Show value in text" позволяет встроить числовое значение в текст графического элемента и указать число знаков после запятой\. Для уровней, специальный шаблон отображения позволяет преобразовать значение из произвольного диапазона в 0\-100% 

Значение встраивается в текст при помощи специального шаблона \($V, $F1, $F2, \.\.\.\), который при запуске i3 pro автоматически заменяется на значение переменной, привязанной в "In Value" элемента: 

1. Включите редактирование текста на элементе
1. Выберите из списка "Show value in text" способ отображения данных в тексте\. В текстовое поле элемента будет добавлен шаблон, например `$V`
1. Перейдите в текстовое поле элемента и укажите текст, который должен отображаться на элементе кроме значения Value, которое будет отображаться на месте шаблона, например `$V%` , чтобы отобразить значение 100, полученное из канала, в виде `100%`

![123](/img/IRidium_studio_2019_Command_Sending/ShowValueInText.png)

| **Шаблон** | **Назначение** |
| --- | --- |
| $V | целая часть полученного значения |
| $F1 \.\.\. $F5 | значение с плавающей точкой\. От 1 до 5 \- это число знаков после точки |
| $F,1 \.\.\. $F,5 | значение с плавающей запятой\. От 1 до 5 \- это число знаков после запятой |
| $S | номер выбранного состояния |
| $X | значение в формате HEX |
| $$ | символ "доллар" |
| $P | \(только уровни\) процент от максимального значения Уровня |
| $H | \(только уровни\) максимальное значение Уровня |
| $A | \(только уровни\) текущее значение минус минимальное значение Уровня |
| $L | \(только уровни\) минимальное значение Уровня |
| $R | \(только уровни\) размах Уровня: максимальное минус минимальное |

Шаблон вносится в текстовое поле графического элемента и может быть совмещен с другим текстом и символами \(комментариями, единицами измерения\) 

- [Загрузить: Проект демонстрирующий работу шаблонов \(0,7 Mb\) ](https://s3.amazonaws.com/iRidiumWiki2.0/iRidiumGUIEditor/Output_templates.irpz)

##  Настройка команд через PROGRAMMING 

Настройка команд через PROGRAMMING графического элемента: 

![123](/img/IRidium_studio_2019_Command_Sending/Studio2019_SidePanel_Programming_drivers.png)

Команды редактора макросов для взаимодействия с драйверами и переменными проекта: 

- **Send To Driver** \(отправка значений в команды драйверов\) 

    - Send Number\. Отправить константу \- десятичное число \(DEC\)
    - Send Text\. Отправить константу \- строку данных \(ASCII\)
    - Send Data\. Отправить константу \- в виде строки \(HEX\)
    - Send Token\. Отправить данные, извлеченные из переменных проекта \(Value, координаты, размеры и т\.д\. – переменные значения, определяемые свойствами объекта\)
- **Send To Token** \(отправка данных в переменные \- свойства элементов, драйверы, токены проекта\) 

    - Send Number\. Записать константу \(число DEC\) в переменную
    - Send Text\. Записать константу \(строку ASCII\) в переменную
    - Send Token\. Записать переменную в переменную \(например, свойство элемента в токен проекта\)

Чтобы отправить команду, выберите событие \(Press, Release\), тип значения \(число, текст или Value элемента\) и переменную, в которую нужно записывать значение\. Если это число или текст, укажите значение, которое нужно отправить\. Сохраните изменения в PROGRAMMING\. 

Теперь, при нажатии на элемент, когда сработает выбранное событие \(в момент нажатия, в момент отпускания или при удержании\), в переменную будет отправляться значение\. 

NewPP limit report
CPU time usage: 0\.037 seconds
Real time usage: 0\.044 seconds
Preprocessor visited node count: 50/1000000
Preprocessor generated node count: 136/1000000
Post‐expand include size: 2024/2097152 bytes
Template argument size: 251/2097152 bytes
Highest expansion depth: 3/40
Expensive parser function count: 0/100 Saved in parser cache with key irmob\_wiki3:pcache:idhash:29810\-0\!\*\!0\!\!ru\!5\!\* and timestamp 20250713080531 and revision id 124377